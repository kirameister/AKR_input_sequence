# 大まかな考えなど

配列について細かく考え始める前に (そしてデータを見る前に)、色々と基本的なことを決めておく必要があるだろう。このドキュメントでは裏 AKR 配列について大まかに考えていたことなどを書いていこうと思う。

## どういう特徴を持った配列なのか

そもそもこの "裏" 配列の前に、AKR シーケンスという名前の、ローマ字入力と AZIK 配列の中間のようなものを意識した日本語入力のためのシーケンスを作成したのが始まりである (それ以前に新下駄配列に挑戦して結局ローマ字入力に戻ったという過去もあるのだけれど、ここでは割愛)。AKR シーケンスを作ってみたは良いものの、思ったよりもタイピングのスピードは伸びなかった。そこで、この裏配列では以下のような特徴を備えさせることで、楽に素早い入力ができることを目指している (ここでの "素早い" とは、単位時間あたりのストローク数が多いというよりも、より多くの文字を入力できるということを意味していることに注意)。

* 既存の IME の仕組みを利用して実現できる -- これは確定前の状態で F10 キーなどを押下することで、それまでキーボードに刻印されているアルファベットのキーが ASCII 文字として IME により変換されることを意味している。
* かな入力である。
* 前置シフト配列である -- かな入力であるということとリンクしているが、同時押しの機構を IME が用意していないのであれば、ローマ字入力のテーブルを書き換えることで実装できるのは前置シフト配列のみという結論になってしまう。とは言えこれは必ずしも悪いことではないと思っている (例えばロールオーバーなどの技が使える)。
* アルペジオを意識する -- 両手を交互に使ったタイピングが得意な配列というのも可能で、それはある程度正しいと思うのだけれど、それ以上に同じ手の別の指で打つ隣接したキーを打つ動作のほうが人間は速い (特に個人的には外側の指から内側の指への移動が速いように思える)。タイピング界や配列界隈ではこれをアルペジオというらしいのだけれど、この配列でもそのような指の動きを意識した配列を心がける。
* 場合によっては三打で打つ文字というのも考える -- これは効率 (effeciency) とカバレッジ (coverage) を両立させようとして考えた結果 (とはいえまだ構想段階ではある)。例えば外国語でしか登場しないような文字を入力できるようにするための仕組みを用意しておくなど。
* 想定している物理キーボードは ANSI US 配列である -- これは宗教的な理由により私自身が ANSI US 配列をできる限り使おうと考えているから。物理 JIS 配列のキーボードも (おそらく) ある程度の修正で対応できると想像するのだけれど、それはやってみないとわからない。
* 主に使うことを想定しているのは三段のキーである -- これはできるだけホームポジションから指を動かさないでタイピングができるようにしたいから。上に書いた "楽に" 入力できる配列というのを目指しているため。

## どのような文字が入力できるのか

以下、作成する配列で最低限カバーされるべき文字の種類と数についてコメントと一緒に書いていく。

----
清音+促音+撥音+長母音: 48
```
あいうえお
かきくけこ
さしすせそ
たちつてと
なにぬねの
はひふへほ
まみむめも
やゆよ
らりるれろ
わを
んっー
```

全てを単打面に含めることはできないけれど、頻出する文字やシーケンスの後半は単打面に含められるべきだろう。

----
句読点: 2
```
、。
```

同じく、これら二つの文字も単打面に含められるべき。

----
拗音文字: 9
```
ぁぃぅぇぉ
ゃゅょゎ
```

これら拗音文字はシフト面 (場合によってはシフト面でも打ちにくい配置) でカバーされても良いと考えている。これはそもそも拗音セットをシフト面でカバーするため。

----
濁音+半濁音: 26
```
がぎぐげご
ざじずぜぞ
だじづでど
ばびぶべぼ
ぱぴぷぺぽ
ヴ
```

`ヴ` を入れるべきかは悩んでいるけれど、これがないと `ヴァイオリン` と入力できないので入れたほうが良いのかも知れない。配列的な扱いは基本的に清音と同じ (つまり濁音/半濁音専用のシフト面というのは考えていない)。もしかしたらこの `ヴ` に関しては大分マイナーな文字ということで、3 ストロークで対応させるぐらいでも良いかも知れない (他にも `でぃ` といった (外国語以外では現れない) 特殊音は 3 ストロークで対応させるぐらいでちょうどよいかも知れない)。

----
拗音セット: 33
```
きゃ きゅ きょ
ぎゃ ぎゅ ぎょ
しゃ しゅ しょ
じゃ じゅ じょ
ちゃ ちゅ ちょ
にゃ にゅ にょ
ひゃ ひゅ ひょ
びゃ びゅ びょ
ぴゃ ぴゅ ぴょ
みゃ みゅ みょ
りゃ りゅ りょ
```

新下駄配列では `ぢゃ ぢゅ ぢょ` の配列は存在しないのだけれど、裏 AKR 配列ではどうするかまだ考えていない。

----

外来語: ???

Wikipedia の外国語に関するページによると、現状日本語としてある程度定着した外国語の拗音と、そうではない拗音が存在するらしい。どこまで拗音セットとしてタイプできるようにするかはまだ考えていない。

----

上の数値から、`48 + 2 + 9 + 26 + 33 = 118` の組み合わせが最低限必要となる。


## シフトキーをどこにするか:
* 最低限 118 のキーの順序が必要となることが分かった。ANSI US 配列で使えるキーは `30` なので、仮に全ての文字を 2 ストロークで入力しようとした場合、`30 * 4 = 120` という数値を思いつく (話を簡単にするために、シフトキーを二度タイプすることでも文字が入力できるとした場合)。実際には、拗音文字を上段のキーに配置したりといったこともできるので、これよりは少しは余裕を持った配列が可能だと想像するのだけれど、さしあたってシフトキーは 3 つあれば大丈夫そうだ。
    * 新下駄配列では、基本的に同じ手で同時に二つのキーを押下することを想定していない。裏 AKR 配列ではそのような縛りは特に設けないので、文字数を稼ぐことができているのだけれど、だからこそアルペジオを意識する必要は大いにある。
* アルペジオのことを考えると、両手の薬指 (`/s/` ならびに `/l/` キー) と、右手の小指 (`/;/` をシフトキーとして採用しようかと考えている)。これはアルペジオで入力する時に、外側から内側に向かう指の動きのほうが無理が無いように感じられるから (特にそのような内容の論文を読んだりしたわけではないので、完全にヤマカンなのですが…)。
* 何度か上でも触れたように、もしこれらのシフトキーで入力できる文字数が現実的に足りないとなった場合には、`/;;/` と二回 `/;/` キーをタイプした後に別のキーをアサインすることも考えている (つまり 3 ストロークである)。

## どのような指の動きを想定しているのか

ここで新下駄配列とこの配列の違いを再度確認しておいたほうが良いかも知れない。新下駄配列は同時押し配列なので、同時に押されるキーの順序は問われない。そのため両中指と両薬指をシフトキーにしていると思うのだけれど、この裏 AKR 配列はそうではない。シフトキーの数が減っている代わりに、キーが押される順序のことを頭に入れなければならない (当然組み合わせが順列になるのでシフトキーの数を減らせるという効果はある)。当然アルペジオのことを念頭に置いて配列を考える必要はあるのだけれど、順列の数という意味では、例えば

右手シフト+左手キー => 右手単打キー or アルペジオの左手単打キー

という組み合わせもほぼ同じぐらい強力な組み合わせであると言えなくも無いと思える。つまりこの配列のことを考える時には、押されることになるキーの流れが (おそらく) 新下駄配列以上に重要になると思われる。

### アルペジオの罠



